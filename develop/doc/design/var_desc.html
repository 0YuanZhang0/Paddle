



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Background &mdash; PaddlePaddle  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="PaddlePaddle  documentation" href="../index.html"/> 
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?b9a314ab40d04d805655aab1deee08ba";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index_en.html" class="icon icon-home"> PaddlePaddle
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
<nav class="doc-menu-vertical" role="navigation">

<ul>
<li class="toctree-l1"><a class="reference internal" href="../getstarted/index_en.html">GET STARTED</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getstarted/quickstart_en.html">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstarted/concepts/use_concepts_en.html">Basic Concept</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../build_and_install/index_en.html">Install and Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../build_and_install/pip_install_en.html">Install using pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_and_install/docker_install_en.html">Run in Docker Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build_and_install/build_from_source_en.html">Build from Sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index_en.html">HOW TO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../howto/cmd_parameter/index_en.html">Set Command-line Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howto/cmd_parameter/use_case_en.html">Use Case</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/cmd_parameter/arguments_en.html">Argument Outline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/cmd_parameter/detail_introduction_en.html">Detail Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howto/cluster/index_en.html">Distributed Training</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howto/cluster/preparations_en.html">Preparations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/cluster/cmd_argument_en.html">Command-line arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/cluster/multi_cluster/index_en.html">Use different clusters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../howto/cluster/multi_cluster/fabric_en.html">Fabric</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/cluster/multi_cluster/openmpi_en.html">OpenMPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/cluster/multi_cluster/k8s_en.html">Kubernetes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../howto/cluster/multi_cluster/k8s_aws_en.html">Kubernetes on AWS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howto/rnn/index_en.html">RNN Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../howto/rnn/rnn_config_en.html">RNN Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/rnn/recurrent_group_en.html">Recurrent Group Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/rnn/hierarchical_layer_en.html">Layers supporting hierarchical sequence as input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../howto/rnn/hrnn_rnn_api_compare_en.html">API comparision between RNN and hierarchical RNN</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../howto/optimization/gpu_profiling_en.html">Tune GPU Performance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index_en.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/contribute_to_paddle_en.html">Contribute Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/write_docs_en.html">Contribute Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index_en.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq/build_and_install/index_en.html">Install, Build and Unit test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/model/index_en.html">Model Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/parameter/index_en.html">Parameter Setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/local/index_en.html">Local Training and Prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq/cluster/index_en.html">Cluster Training and Prediction</a></li>
</ul>
</li>
</ul>

</nav>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index_en.html">PaddlePaddle</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index_en.html">Docs</a> &raquo;</li>
      
    <li>Background</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/design/var_desc.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="background">
<span id="background"></span><h1>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h1>
<p>PaddlePaddle divides the description of neural network computation into two stages: compile time and runtime. At compile time, the neural network computation is described as a <code class="docutils literal"><span class="pre">ProgramDesc</span></code> whereas at runtime an <code class="docutils literal"><span class="pre">Executor</span></code> interprets the <code class="docutils literal"><span class="pre">ProgramDesc</span></code> to compute the operations.</p>
<p>PaddlePaddle uses proto message to describe compile time program because :</p>
<ol class="simple">
<li>The computation program description must be serializable and saved in a file.</li>
<li>During distributed training, the serialized program will be sent to multiple workers. It should also be possible to break the program into different components, each of which can be executed on a different worker.</li>
</ol>
<p>The computation <code class="docutils literal"><span class="pre">Program</span></code> consists of nested <code class="docutils literal"><span class="pre">Blocks</span></code>. Each <code class="docutils literal"><span class="pre">Block</span></code> will consist of data(i.e. <code class="docutils literal"><span class="pre">Variable</span></code>)  and  <code class="docutils literal"><span class="pre">Operations</span></code>. The concept to represent them is in the table below.</p>
<p>| |compile time|runtime|
|&#8212;|&#8212;|&#8212;|
|Data|VarDesc(proto)|Variable(cpp)|
|Operation|OpDesc(proto)|Operator(cpp)|</p>
</div>
<div class="section" id="definition-of-vartype">
<span id="definition-of-vartype"></span><h1>Definition of VarType<a class="headerlink" href="#definition-of-vartype" title="Permalink to this headline">¶</a></h1>
<p>A VarDesc should have a name, type and whether or not it is persistable. The are different kinds of variable types supported in PaddlePaddle, apart from the POD_Types like: <code class="docutils literal"><span class="pre">LOD_TENSOR</span></code>, <code class="docutils literal"><span class="pre">SELECTED_ROWS</span></code>, <code class="docutils literal"><span class="pre">FEED_MINIBATCH</span></code>, <code class="docutils literal"><span class="pre">FETCH_LIST</span></code>, <code class="docutils literal"><span class="pre">STEP_SCOPES</span></code>, <code class="docutils literal"><span class="pre">LOD_RANK_TABLE</span></code>, <code class="docutils literal"><span class="pre">LOD_TENSOR_ARRAY</span></code>, <code class="docutils literal"><span class="pre">PLACE_LIST</span></code>, <code class="docutils literal"><span class="pre">READER</span></code> and <code class="docutils literal"><span class="pre">CHANNEL</span></code>. These are declared inside <code class="docutils literal"><span class="pre">VarType</span></code>. A <code class="docutils literal"><span class="pre">VarDesc</span></code> then looks as the following:</p>
<div class="highlight-proto"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">VarDesc</span> <span class="p">{</span>
  <span class="k">required</span> <span class="kt">string</span> <span class="na">name</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">required</span> <span class="n">VarType</span> <span class="na">type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="k">optional</span> <span class="kt">bool</span> <span class="na">persistable</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">[</span> <span class="k">default</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="definition-of-tensordesc">
<span id="definition-of-tensordesc"></span><h1>Definition of TensorDesc<a class="headerlink" href="#definition-of-tensordesc" title="Permalink to this headline">¶</a></h1>
<div class="highlight-proto"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">TensorDesc</span> <span class="p">{</span>
  <span class="c1">// Should only be PODType. Is enforced in C++</span>
  <span class="k">required</span> <span class="n">Type</span> <span class="na">data_type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">repeated</span> <span class="kt">int64</span> <span class="na">dims</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// [UNK, 640, 480] is saved as [-1, 640, 480]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">Type</span></code> here comes from the enum defined inside of <code class="docutils literal"><span class="pre">VarType</span></code> :</p>
<div class="highlight-proto"><div class="highlight"><pre><span></span><span class="kd">enum</span> <span class="n">Type</span> <span class="p">{</span>
  <span class="c1">// Pod Types</span>
  <span class="na">BOOL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="na">INT16</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="na">INT32</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="na">INT64</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="na">FP16</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="na">FP32</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="na">FP64</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

  <span class="c1">// Other types that may need additional descriptions</span>
  <span class="na">LOD_TENSOR</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
  <span class="na">SELECTED_ROWS</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
  <span class="na">FEED_MINIBATCH</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
  <span class="na">FETCH_LIST</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="na">STEP_SCOPES</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
  <span class="na">LOD_RANK_TABLE</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
  <span class="na">LOD_TENSOR_ARRAY</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>
  <span class="na">PLACE_LIST</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span>
  <span class="na">READER</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
  <span class="na">CHANNEL</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A TensorDesc describes <code class="docutils literal"><span class="pre">SelectedRows</span></code> and <code class="docutils literal"><span class="pre">LoDTensor</span></code>. For details of <code class="docutils literal"><span class="pre">SelectedRows</span></code>, please reference <a class="reference external" href="./selected_rows.md"><code class="docutils literal"><span class="pre">SelectedRows</span></code></a>.</p>
</div>
<div class="section" id="definition-of-lodtensordesc">
<span id="definition-of-lodtensordesc"></span><h1>Definition of LodTensorDesc<a class="headerlink" href="#definition-of-lodtensordesc" title="Permalink to this headline">¶</a></h1>
<div class="highlight-proto"><div class="highlight"><pre><span></span><span class="kd">message</span> <span class="nc">LoDTensorDesc</span> <span class="p">{</span>
  <span class="k">required</span> <span class="n">TensorDesc</span> <span class="na">tensor</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">optional</span> <span class="kt">int32</span> <span class="na">lod_level</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">[</span> <span class="k">default</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A LoDTensorDesc contains a tensor and a lod_level.</p>
</div>
<div class="section" id="definition-of-variable-in-python">
<span id="definition-of-variable-in-python"></span><h1>Definition of Variable in Python<a class="headerlink" href="#definition-of-variable-in-python" title="Permalink to this headline">¶</a></h1>
<p>For Variable in Python, please reference <a class="reference external" href="./python_api.md"><code class="docutils literal"><span class="pre">Python</span> <span class="pre">API</span></code></a>.</p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, PaddlePaddle developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>